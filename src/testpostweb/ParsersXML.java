/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package testpostweb;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.StringReader;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.time.ZoneId;
import java.time.format.DateTimeFormatter;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.Scanner;
import java.util.TimeZone;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Node;
import org.w3c.dom.bootstrap.DOMImplementationRegistry;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSSerializer;
import org.xml.sax.InputSource;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.CDL;


/**
 *
 * @author Administrator
 */
public class ParsersXML extends javax.swing.JFrame {

    /**
     * Creates new form ParsersXML
     */
    public ParsersXML() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        txtFile = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        txaXMLData = new javax.swing.JTextArea();
        jScrollPane2 = new javax.swing.JScrollPane();
        txaParserXML = new javax.swing.JTextArea();
        jButton2 = new javax.swing.JButton();
        txtJsonArray = new javax.swing.JTextField();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("XML");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        txaXMLData.setColumns(20);
        txaXMLData.setLineWrap(true);
        txaXMLData.setRows(5);
        jScrollPane1.setViewportView(txaXMLData);

        txaParserXML.setColumns(20);
        txaParserXML.setLineWrap(true);
        txaParserXML.setRows(5);
        jScrollPane2.setViewportView(txaParserXML);

        jButton2.setText("JSON");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jButton3.setText("JSON2");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });

        jButton4.setText("Test");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, 106, Short.MAX_VALUE)
                            .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jButton3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(txtJsonArray)
                            .addComponent(txtFile, javax.swing.GroupLayout.DEFAULT_SIZE, 888, Short.MAX_VALUE))
                        .addGap(39, 39, 39))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 466, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.DEFAULT_SIZE, 662, Short.MAX_VALUE)
                        .addContainerGap())))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jButton1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 49, Short.MAX_VALUE)
                    .addComponent(txtFile, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 34, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(txtJsonArray)
                        .addGap(24, 24, 24))
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jButton3, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jButton4, javax.swing.GroupLayout.PREFERRED_SIZE, 40, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 677, Short.MAX_VALUE)
                    .addComponent(jScrollPane2))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        String data;
        
        
        try {
          File myObj = new File(txtFile.getText());
          Scanner myReader = new Scanner(myObj);
          data = "";
          while (myReader.hasNextLine()) {
            data = data + myReader.nextLine();
          }
          txaXMLData.setText(data);
          txaParserXML.setText(format(data)); 
          myReader.close();
        } catch (FileNotFoundException e) {
          System.out.println("An error occurred.");
          e.printStackTrace();
        }  
        


        
    }//GEN-LAST:event_jButton1ActionPerformed

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton2ActionPerformed
        // TODO add your handling code here:
        String data;
        JSONObject obj = null;
        JSONArray arr = null;
        String sRetStt = "";
        String sErrMsg = "";
        String sErrCod = "";
        String sErrDtl = "";
        String post_id = "";
        

        File myObj = new File(txtFile.getText());
         
        // D:\My Documents\BRabbit\Customers\KDMS\Interface\Test Data\PatientVisit.json
        String first = "BobFile.json"; // this is the same as:  /Users/temp/IdeaProjects/ReadFromJson/BobFile.json
        String contents = null;
        String sGetArray;
        
        try {
            contents = new String((Files.readAllBytes(Paths.get(txtFile.getText()))));
        } catch (IOException ex) {
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
        }
        JSONObject o = null;
        try {
            o = new JSONObject(contents);
        } catch (JSONException ex) {
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
        }

        System.out.println(o);

        try {
            JSONArray identityitems = o.getJSONArray("visitcareproviders");
            System.out.println(identityitems); 
            
            /*
            for (int i = 0; i < identityitems.length(); i++) {
                String sSubItem = identityitems.getJSONObject(i).getString("departmentuid");
                System.out.println(sSubItem);
            }
            */
            JSONArray identityitems2 = o.getJSONArray("visitpayors");
            System.out.println(identityitems2); 
            
            JSONArray identityitems3 = o.getJSONArray("visitjourneys");
            System.out.println(identityitems3);   
            // D:\My Documents\BRabbit\Customers\KDMS\Interface\Test Data\PatientVisit.json
            
            String firstName = o.getString("firstName");
            JSONArray identityitems4 = o.getJSONArray("visitid");  //
            System.out.println(identityitems4);  

            JSONArray identityitems5 = o.getJSONArray("mrn");   //
            System.out.println(identityitems5);  
            
            JSONArray identityitems6 = o.getJSONArray("firstname"); //
            System.out.println(identityitems6);       
            
            JSONArray identityitems7 = o.getJSONArray("lastname");  //
            System.out.println(identityitems7); 

            JSONArray identityitems8 = o.getJSONArray("titleuid");
            System.out.println(identityitems8); 
        } catch (JSONException ex) {
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
        }
        

        // String language = jsonLineItem.getString("language");
        

            
            /*
            data = txaXMLData.getText();
            try {
            obj = new JSONObject(data);
            } catch (JSONException ex) {
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
            }
            
            try {
            sRetStt = obj.getString("status");
            } catch (JSONException ex) {
            sRetStt = "";
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
            }
            
            if("nok".equals(sRetStt)){
            try {
            sErrCod = "error - code: " + obj.getJSONObject("error").getString("code") + "\n";
            sErrDtl = "error - msg: " + obj.getJSONObject("error").getString("msg") + "\n";
            } catch (JSONException ex) {
            sErrCod = "error - code: " + "\n";
            sErrDtl = "error - msg: " + "\n";
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
            }
            txaParserXML.setText(sErrCod + sErrDtl);
            }
            else{
            try {
            sErrCod = "data: " + obj.getJSONObject("data").getString("104497") + "\n";
            sErrDtl = "status: " + sRetStt + "\n";
            } catch (JSONException ex) {
            sErrCod = "data: " + "\n";
            sErrDtl = "status: " + "\n";
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
            }
            txaParserXML.setText(sErrCod + sErrDtl);
            }
            */
            
            /*
            try {
            arr = obj.getJSONArray("posts");
            for (int i = 0; i < arr.length(); i++) {
            post_id = arr.getJSONObject(i).getString("post_id");
            System.out.println(post_id);
            }              
            } catch (JSONException ex) {
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
            }
            
            */

    }//GEN-LAST:event_jButton2ActionPerformed

    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton3ActionPerformed
        try {
            // TODO add your handling code here:
            String json = "{\"contacDetails\": {\n" +   //JSON text is written here
                    "            \"firstName\": \"Ram\",\n" +
                    "            \"lastName\": \"Sharma\"\n" +
                    "    },\n" +
                    "    \"phoneNumbers\": [\n" +
                    "            {\n" +
                    "                \"type\": \"home\",\n" +
                    "                \"phone-number\": \"212 888-2365\",\n" +
                    "            }\n" +
                    "    ]" +
                    "}";
            
            /*
            {
            "contacDetails": {
                    "firstName": "Ram",
                    "lastName": "Sharma"
                    },
            "phoneNumbers": [{
                    "type": "home",
                    "phone-number": "212 888-2365",
                    }]
            }            
            */
            
            JSONObject ob = new JSONObject(txaXMLData.getText());
            //txaParserXML.setText(ob.toString() +  "\n");

            //getting first and last name
            /*
            String firstName = ob.getJSONObject("contacDetails").getString("firstName");
            String lastName = ob.getJSONObject("contacDetails").getString("lastName");
            txaParserXML.append("FirstName : " + firstName +  "\n");
            txaParserXML.append("LastName : " + lastName +  "\n");
            
            //loop for printing the array as phoneNumber is stored as array.
            JSONArray arr = ob.getJSONArray("phoneNumbers");
            for (int i = 0; i < arr.length(); i++) {
                String post_id = arr.getJSONObject(i).getString("phone-number");
                // System.out.println(post_id);
                txaParserXML.append("Phone No. : " + post_id +  "\n");
            }
            */
            
            /*
            JSONArray arr = ob.getJSONArray("visitcareproviders");
            txaParserXML.setText("\n");
            for (int i = 0; i < arr.length(); i++) {
                txaParserXML.append("Array Detail : " + arr.getJSONObject(i) +  "\n\n");
                JSONObject oArrSub = arr.getJSONObject(i).getJSONObject("departmentuid");
                String sDepartmentName = oArrSub.getString("name");
                // System.out.println(post_id);
                txaParserXML.append("department name. : " + sDepartmentName +  "\n\n");
                
                String sCareprovideruid = "";
                // arr.getJSONObject(i).getString("careprovideruid")
                if(arr.getJSONObject(i).isNull("careprovideruid")){
                    sCareprovideruid = "NULL";
                }
                else{
                    JSONObject oArrSub2 = arr.getJSONObject(i).getJSONObject("careprovideruid");
                    sCareprovideruid = oArrSub2.getString("name");
                }
                txaParserXML.append("Care Provider Name : " + sCareprovideruid +  "\n\n");
            }            
            */
            
            txaParserXML.setText("\n");
            String sVisitID = "";
            sVisitID = ob.getString("visitid");
            txaParserXML.append("Visit ID : " + sVisitID +  "\n\n");
            
            JSONObject oSub = ob.getJSONObject("patientuid");
            txaParserXML.append("patientuid Detail : " + oSub +  "\n\n");

            String sCareprovideruid = "";
            sCareprovideruid = oSub.getString("mrn");
            txaParserXML.append("Patient ID : " + sCareprovideruid +  "\n\n");
            
            String sNationalid = "";
            if(oSub.isNull("nationalid")){
                sNationalid = "NULL";
            }
            else{
                sNationalid = oSub.getString("nationalid");
            }
            
            txaParserXML.append("National ID : " + sNationalid +  "\n\n");            
            
            String sTitleuid = "";
            if(oSub.isNull("titleuid")){
                sNationalid = "NULL";
            }
            else{
                sNationalid = oSub.getString("titleuid");
            }
            
            txaParserXML.append("Title ID : " + sTitleuid +  "\n\n");   
            
        } catch (JSONException ex) {
            Logger.getLogger(ParsersXML.class.getName()).log(Level.SEVERE, null, ex);
        }
        
    }//GEN-LAST:event_jButton3ActionPerformed

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton4ActionPerformed
        // TODO add your handling code here:
        String sReturnResult;
        String sExtractData;
        
        // 2022-02-14T09:06:32.628Z
        // Greenwich/UTC

        System.out.println(LocalDateTime.now(ZoneId.of("Asia/Bangkok")));
        System.out.println(LocalDateTime.now(ZoneId.of("Pacific/Auckland")));
        
        
        //sExtractData = txaXMLData.getText();
        //sReturnResult = sExtractData.replaceAll("[\\r\\n\\t]", "");
        //txaParserXML.setText(sReturnResult);
        
        
        // Create a calendar object and set it time based on the local time zone
          Calendar localTime = Calendar.getInstance();
          localTime.set(Calendar.HOUR, 17);
          localTime.set(Calendar.MINUTE, 15);
          localTime.set(Calendar.SECOND, 20);

          int hour = localTime.get(Calendar.HOUR);
          int minute = localTime.get(Calendar.MINUTE);
          int second = localTime.get(Calendar.SECOND);

          int day = localTime.get(Calendar.DAY_OF_MONTH);
          int month = localTime.get(Calendar.MONTH);
          int year = localTime.get(Calendar.YEAR);

          // Print the local time
          System.out.printf("Local time  : %02d:%02d:%02d\n", hour, minute, second);


          // Create a calendar object for representing a Bangkok time zone. Then we set
          //the time of the calendar with the value of the local time

          Calendar BangkokTime = new GregorianCalendar(TimeZone.getTimeZone("Asia/Bangkok"));
          BangkokTime.setTimeInMillis(localTime.getTimeInMillis());
          hour = BangkokTime.get(Calendar.HOUR);
          minute = BangkokTime.get(Calendar.MINUTE);
          second = BangkokTime.get(Calendar.SECOND);
          day = BangkokTime.get(Calendar.DAY_OF_MONTH);
          month = BangkokTime.get(Calendar.MONTH);
          year = BangkokTime.get(Calendar.YEAR);
          
          // Print the local time in Bangkok time zone
          System.out.printf("Bangkok time: %02d/%02d/%02d %02d:%02d:%02d\n", day, month, year, hour, minute, second);


          //Then do the same for the Moscow time zone
          // Pacific/Auckland   UTC
          Calendar MoscowTime = new GregorianCalendar(TimeZone.getTimeZone("UTC"));
          MoscowTime.setTimeInMillis(localTime.getTimeInMillis());
          hour = MoscowTime.get(Calendar.HOUR);
          minute = MoscowTime.get(Calendar.MINUTE);
          second = MoscowTime.get(Calendar.SECOND);
          day = MoscowTime.get(Calendar.DAY_OF_MONTH);
          month = MoscowTime.get(Calendar.MONTH);
          year = MoscowTime.get(Calendar.YEAR);

          // Print the local time in Moscow time zone
          System.out.printf("UTC time: %02d/%02d/%02d %02d:%02d:%02d\n", day, month, year, hour, minute, second);
          
          
          
            // The problem - not UTC
            String sShowDateTime;
            
            sShowDateTime = now().toString();
            System.out.printf(sShowDateTime);
            // "Tue Jul 03 14:54:24 IDT 2012"

            // ISO format, now
            sShowDateTime = ParsersXML.now();
            System.out.printf(sShowDateTime);
            // "2012-07-03T11:54:24.256 UTC"

            // ISO format, specific date
            sShowDateTime = ParsersXML.DatetoString(new Date());
            System.out.printf(sShowDateTime);
            // "2012-07-03T11:54:24.256 UTC"

            // Legacy format, specific date
            sShowDateTime = ParsersXML.DatetoLegacyString(new Date());   
            System.out.printf(sShowDateTime);
            // "Tue Jul 03 11:54:24 UTC 2012"

            // ISO, specific date and time zone
            sShowDateTime = ParsersXML.DatetoString(new Date(), "yyyy-MM-dd hh:mm:ss zzz", "CST"); 
            System.out.printf(sShowDateTime);
            // "1969-07-20 03:17:40 CDT"

            // Specific format and date
            sShowDateTime = ParsersXML.DatetoString(new Date(), "yyyy-MM-dd");
            System.out.printf(sShowDateTime);
            // "1969-07-20"

            // ISO, specific date
            sShowDateTime = ParsersXML.DatetoString(new Date());
            System.out.printf(sShowDateTime);
            // "1969-07-20T20:17:40.234 UTC"

            // Legacy, specific date
            sShowDateTime = ParsersXML.DatetoLegacyString(new Date());
            System.out.printf(sShowDateTime);
            // "Wed Jul 20 08:17:40 UTC 1969"
          
          
          
        sReturnResult = txaXMLData.getText();
        
        JSONObject jsonObj = null;
        try {
            jsonObj = new JSONObject(sReturnResult);
        } 
        catch (JSONException e) {
            e.printStackTrace();
        }

        

        
    }//GEN-LAST:event_jButton4ActionPerformed

    public static String ISO_FORMAT = "yyyy-MM-dd'T'HH:mm:ss.SSS zzz";
    public static String LEGACY_FORMAT = "EEE MMM dd hh:mm:ss zzz yyyy";
    private static final TimeZone utc = TimeZone.getTimeZone("UTC");
    private static final SimpleDateFormat legacyFormatter = new SimpleDateFormat(LEGACY_FORMAT);
    private static final SimpleDateFormat isoFormatter = new SimpleDateFormat(ISO_FORMAT);
    static {
        legacyFormatter.setTimeZone(utc);
        isoFormatter.setTimeZone(utc);
    }

    /**
     * Formats the current time in a sortable ISO-8601 UTC format.
     * 
     * @return Current time in ISO-8601 format, e.g. :
     *         "2012-07-03T07:59:09.206 UTC"
     */
    public static String now() {
        return ParsersXML.DatetoString(new Date());
    }

    /**
     * Formats a given date in a sortable ISO-8601 UTC format.
     * 
     * <pre>
     * <code>
     * final Calendar moonLandingCalendar = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
     * moonLandingCalendar.set(1969, 7, 20, 20, 18, 0);
     * final Date moonLandingDate = moonLandingCalendar.getTime();
     * System.out.println("UTCDate.toString moon:       " + PrettyDate.toString(moonLandingDate));
     * >>> UTCDate.toString moon:       1969-08-20T20:18:00.209 UTC
     * </code>
     * </pre>
     * 
     * @param date
     *            Valid Date object.
     * @return The given date in ISO-8601 format.
     * 
     */

    public static String DatetoString(final Date date) {
        return isoFormatter.format(date);
    }

    /**
     * Formats a given date in the standard Java Date.toString(), using UTC
     * instead of locale time zone.
     * 
     * <pre>
     * <code>
     * System.out.println(UTCDate.toLegacyString(new Date()));
     * >>> "Tue Jul 03 07:33:57 UTC 2012"
     * </code>
     * </pre>
     * 
     * @param date
     *            Valid Date object.
     * @return The given date in Legacy Date.toString() format, e.g.
     *         "Tue Jul 03 09:34:17 IDT 2012"
     */
    public static String DatetoLegacyString(final Date date) {
        return legacyFormatter.format(date);
    }

    /**
     * Formats a date in any given format at UTC.
     * 
     * <pre>
     * <code>
     * final Calendar moonLandingCalendar = Calendar.getInstance(TimeZone.getTimeZone("UTC"));
     * moonLandingCalendar.set(1969, 7, 20, 20, 17, 40);
     * final Date moonLandingDate = moonLandingCalendar.getTime();
     * PrettyDate.toString(moonLandingDate, "yyyy-MM-dd")
     * >>> "1969-08-20"
     * </code>
     * </pre>
     * 
     * 
     * @param date
     *            Valid Date object.
     * @param format
     *            String representation of the format, e.g. "yyyy-MM-dd"
     * @return The given date formatted in the given format.
     */
    public static String DatetoString(final Date date, final String format) {
        return DatetoString(date, format, "UTC");
    }

    /**
     * Formats a date at any given format String, at any given Timezone String.
     * 
     * 
     * @param date
     *            Valid Date object
     * @param format
     *            String representation of the format, e.g. "yyyy-MM-dd HH:mm"
     * @param timezone
     *            String representation of the time zone, e.g. "CST"
     * @return The formatted date in the given time zone.
     */
    public static String DatetoString(final Date date, final String format, final String timezone) {
        final TimeZone tz = TimeZone.getTimeZone(timezone);
        final SimpleDateFormat formatter = new SimpleDateFormat(format);
        formatter.setTimeZone(tz);
        return formatter.format(date);
    }    
    
    /*
        String unformattedXml;

        unformattedXml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><CheckupData><PersonalID><Name>วาสนา</Name><Surmame>ยอดดำเนิน</Surmame><HospitalID>563497</HospitalID><Age>65</Age><Sex>F</Sex><DateofCheckup>27/7/2019</DateofCheckup><GeneralAllergy>aspirin, NSAIDs(Salicylates),</GeneralAllergy><MedicineAllergy>ASPENT 300 mg TABLET (ASPIRIN), rhinaTHIOL KIDS SYRUP 100 mg/5 ml (CARBOCISTEINE) (60 ml),</MedicineAllergy></PersonalID><SendtoPTcomplete><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></SendtoPTcomplete><GENERALHISTORY><ประวัติแพ้ยาหรือสิ่งที่แพ้Allergy><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>NSAIDS, Aspent, Carbocisteine</Grading></ประวัติแพ้ยาหรือสิ่งที่แพ้Allergy><โรคประจำตัวCongenitaldisease><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>เบาหวาน ความดัน ไขมันสูง</Grading></โรคประจำตัวCongenitaldisease><อาการสำคัญและอาการเจ็บป่วยปัจจุบันCurrentillness><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>มี/Yes</Grading></อาการสำคัญและอาการเจ็บป่วยปัจจุบันCurrentillness><อาการสำคัญและเจ็บป่วยChiefcomplainผลตรวจ><Result>เจ็บคอ 3-4 วัน</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>เจ็บคอ 3-4 วัน</Grading></อาการสำคัญและเจ็บป่วยChiefcomplainผลตรวจ><ประวัติการสูบบุหรี่><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></ประวัติการสูบบุหรี่><ประวัติการสูบบุหรี่ผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ประวัติการสูบบุหรี่ผลตรวจ><ประวัติการดื่มสุราAlcohol><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></ประวัติการดื่มสุราAlcohol><ประวัติการดื่มสุราAlcoholผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ประวัติการดื่มสุราAlcoholผลตรวจ><โรคหัวใจHeartDisease><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>มี/Yes</Grading></โรคหัวใจHeartDisease><โรคหัวใจHeartDiseaseผลตรวจ><Result>พี่ชายเสียชีวิตกระทันหัน, แม่เป็นหัวใจ</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>พี่ชายเสียชีวิตกระทันหัน, แม่เป็นหัวใจ</Grading></โรคหัวใจHeartDiseaseผลตรวจ><โรคความดันโลหิตสูงHypertension><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>มี/Yes</Grading></โรคความดันโลหิตสูงHypertension><โรคความดันโลหิตสูงHypertensionผลตรวจ><Result>พี่สาว</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>พี่สาว</Grading></โรคความดันโลหิตสูงHypertensionผลตรวจ><โรคเบาหวานDIABETESMELLITUS><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>มี/Yes</Grading></โรคเบาหวานDIABETESMELLITUS><โรคเบาหวานDiabetesmellitusผลตรวจ><Result>พี่น้องเป็นเบาหวานหมด 4 คน</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>พี่น้องเป็นเบาหวานหมด 4 คน</Grading></โรคเบาหวานDiabetesmellitusผลตรวจ><โรคหอบหืดASTHMA><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></โรคหอบหืดASTHMA><โรคหอบหืดAsthmaผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></โรคหอบหืดAsthmaผลตรวจ><โรคมะเร็งCancer><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></โรคมะเร็งCancer><โรคมะเร็งCancerผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></โรคมะเร็งCancerผลตรวจ><โรคไขมันในเลือดสูงHyperlipidemia><Result>มี/Yes</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>มี/Yes</Grading></โรคไขมันในเลือดสูงHyperlipidemia><โรคไขมันในเลือดสูงHyperlipidemia><Result>พี่น้อง</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>พี่น้อง</Grading></โรคไขมันในเลือดสูงHyperlipidemia><โรคไตKIDNEYDISEASE><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></โรคไตKIDNEYDISEASE><โรคไตKidneyDisease><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></โรคไตKidneyDisease><โรคตับLiverDisease><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></โรคตับLiverDisease><โรคตับLIVERDISEASE><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></โรคตับLIVERDISEASE><อื่นๆOther><Result>ไม่มี/No</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่มี/No</Grading></อื่นๆOther><OtherRemark><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></OtherRemark><ตาบอดสีColorSense><Result>ไม่ตรวจ/N/A</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่ตรวจ/N/A</Grading></ตาบอดสีColorSense><การมองเห็นVisionตาขวาRight><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></การมองเห็นVisionตาขวาRight><การมองเห็นVisionตาซ้ายLeft><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></การมองเห็นVisionตาซ้ายLeft><ความดันตาด้านซ้ายEyePressureLeft><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ความดันตาด้านซ้ายEyePressureLeft><ความดันตาด้านขวาEyePressureRight><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ความดันตาด้านขวาEyePressureRight><การปรับสภาพตา><Result>ไม่ตรวจ/N/A</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ไม่ตรวจ/N/A</Grading></การปรับสภาพตา></GENERALHISTORY><PHYSICALEXAMINATION><Weight><Result>61.4</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>61.4</Grading></Weight><Height><Result>145.0</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>145.0</Grading></Height><รอบเอวWAIST><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></รอบเอวWAIST><การหายใจRespiration><Result>20</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>20</Grading></การหายใจRespiration><Pulse><Result>86</Result><ReferenceLow>40</ReferenceLow><ReferenceHigh>160</ReferenceHigh><Grading></Grading></Pulse><BloodSystolic><Result>59</Result><ReferenceLow>0</ReferenceLow><ReferenceHigh>200</ReferenceHigh><Grading></Grading></BloodSystolic><BloodDiastolic><Result>129</Result><ReferenceLow>0</ReferenceLow><ReferenceHigh>300</ReferenceHigh><Grading></Grading></BloodDiastolic><BMI><Result>29.203</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>29.203</Grading></BMI><Rh><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Rh><Bloodgroup><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Bloodgroup><Tempperature><Result>36.5</Result><ReferenceLow>35</ReferenceLow><ReferenceHigh>41</ReferenceHigh><Grading></Grading></Tempperature><T-SCORE><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></T-SCORE></PHYSICALEXAMINATION><GENERALAPPEARANCE><สติสัมปชัญญะApperception><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></สติสัมปชัญญะApperception><สติสัมปชัญญะREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></สติสัมปชัญญะREMARK><ศรีษะหน้าHEADFACE><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ศรีษะหน้าHEADFACE><ศรีษะหน้าHEADFACEREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ศรีษะหน้าHEADFACEREMARK><ตาEYE><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></ตาEYE><ตาEYESREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ตาEYESREMARK><PupilsEqualityandreaction><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></PupilsEqualityandreaction><OccularMotility><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></OccularMotility><หูจมูกEARSNOSE><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></หูจมูกEARSNOSE><หูจมูกEARSNOSEREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></หูจมูกEARSNOSEREMARK><ปากคอMOUTHTHROAT><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></ปากคอMOUTHTHROAT><ปากคอREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ปากคอREMARK><ฟันเหงือกTeethGun><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ฟันเหงือกTeethGun><ฟันเหงือกTeethGunRemark><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ฟันเหงือกTeethGunRemark><ต่อมธัยรอยด์THYROID><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ต่อมธัยรอยด์THYROID><ต่อมธัยรอยด์REMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ต่อมธัยรอยด์REMARK><ต่อมน้ำเหลืองLYMPHNODE><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></ต่อมน้ำเหลืองLYMPHNODE><ต่อมน้ำเหลืองREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ต่อมน้ำเหลืองREMARK><หัวใจHEART><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></หัวใจHEART><หัวใจREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></หัวใจREMARK><ทรวงอกปอดChestLung><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></ทรวงอกปอดChestLung><ทรวงอกปอดChestLungREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ทรวงอกปอดChestLungREMARK><เต้านมBREAST><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></เต้านมBREAST><เต้านมBREASTREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></เต้านมBREASTREMARK><VascularSystemVaricosities><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></VascularSystemVaricosities><ช่องท้องABDOMEN><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></ช่องท้องABDOMEN><ช่องท้องREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ช่องท้องREMARK><AnusandRectum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AnusandRectum><ทวารหนักลำไส้ใหญ่AnusRectumผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ทวารหนักลำไส้ใหญ่AnusRectumผลตรวจ><ระบบสืบพันธ์Genitalia><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระบบสืบพันธ์Genitalia><ระบบสืบพันธุ์Genitaliaผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระบบสืบพันธุ์Genitaliaผลตรวจ><SpineOtherMusculoskeletal><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></SpineOtherMusculoskeletal><กระดูกสันหลังSpineผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></กระดูกสันหลังSpineผลตรวจ><แขนขาEXTREMITIES><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></แขนขาEXTREMITIES><แขนขาREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></แขนขาREMARK><ผิวหนังSKIN><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></ผิวหนังSKIN><ผิวหนังREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ผิวหนังREMARK><AbdomenandViscera><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></AbdomenandViscera><HerniaNone-Normal><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></HerniaNone-Normal><G.U.SystemPelvicifnecessary><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></G.U.SystemPelvicifnecessary><Neurological><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></Neurological><Psychiatrical><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></Psychiatrical><อื่นๆOTHERS><Result>ปกติ/Normal</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></อื่นๆOTHERS><อื่นๆREMARK><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></อื่นๆREMARK></GENERALAPPEARANCE><COMPLETESBLOOD><CBC><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CBC><CBC><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading>ปกติ/Normal</Grading></CBC><ความผิดปกติของเม็ดเลือดCBCDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ความผิดปกติของเม็ดเลือดCBCDetail><Hb><Result>13.5</Result><ReferenceLow>12</ReferenceLow><ReferenceHigh>17.3</ReferenceHigh><Grading></Grading></Hb><Hct><Result>41.3</Result><ReferenceLow>37</ReferenceLow><ReferenceHigh>47</ReferenceHigh><Grading></Grading></Hct><Rbccount><Result>4.95</Result><ReferenceLow>3.9</ReferenceLow><ReferenceHigh>5.7</ReferenceHigh><Grading></Grading></Rbccount><Wbccount><Result>5.94</Result><ReferenceLow>5</ReferenceLow><ReferenceHigh>10</ReferenceHigh><Grading></Grading></Wbccount><Neutrophil><Result>56.1</Result><ReferenceLow>37</ReferenceLow><ReferenceHigh>75</ReferenceHigh><Grading></Grading></Neutrophil><Lymphocyte><Result>33.0</Result><ReferenceLow>20</ReferenceLow><ReferenceHigh>55</ReferenceHigh><Grading></Grading></Lymphocyte><Monocyte><Result>8.2</Result><ReferenceLow>.5</ReferenceLow><ReferenceHigh>15</ReferenceHigh><Grading></Grading></Monocyte><Eosinophil><Result>2.2</Result><ReferenceLow>.5</ReferenceLow><ReferenceHigh>8</ReferenceHigh><Grading></Grading></Eosinophil><Basophil><Result>0.5</Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Basophil><Plateletcount><Result>312</Result><ReferenceLow>140</ReferenceLow><ReferenceHigh>400</ReferenceHigh><Grading></Grading></Plateletcount><PLATELETSMEAR><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></PLATELETSMEAR><RBCMORPHOLOGY><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></RBCMORPHOLOGY><DIFF.COUNT><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></DIFF.COUNT><MORP.RBC><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></MORP.RBC><PLATELETผลการตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></PLATELETผลการตรวจ><MCV><Result>83.4</Result><ReferenceLow>79</ReferenceLow><ReferenceHigh>97</ReferenceHigh><Grading></Grading></MCV><MCH><Result>27.3</Result><ReferenceLow>26</ReferenceLow><ReferenceHigh>34</ReferenceHigh><Grading></Grading></MCH><MCHC><Result>32.7</Result><ReferenceLow>31</ReferenceLow><ReferenceHigh>36</ReferenceHigh><Grading></Grading></MCHC><RDW><Result>13.8</Result><ReferenceLow>11.6</ReferenceLow><ReferenceHigh>14.5</ReferenceHigh><Grading></Grading></RDW></COMPLETESBLOOD><STOOLEXAMINATION><Stoolexam.stool><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Stoolexam.stool><StoolOccultblood><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></StoolOccultblood><ตรวจหาเม็ดเลือดในอุจจาระStoolOccultblood><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ตรวจหาเม็ดเลือดในอุจจาระStoolOccultblood><ColorStool><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ColorStool><AppearanceStool><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AppearanceStool><RBCHPFStool><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></RBCHPFStool><WBCHPFStool><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></WBCHPFStool><CulturesensitivitySTOOL><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CulturesensitivitySTOOL><YeastStool><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></YeastStool></STOOLEXAMINATION><OvaParasite><OvaParasite><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></OvaParasite><StoolOthers><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></StoolOthers></OvaParasite><BLOODCHEMISTRY><LipidprofileCholTrigHDLLDL><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></LipidprofileCholTrigHDLLDL><FBS><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></FBS><ระดับน้ำตาลในเลือดFastingbloodsugardetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระดับน้ำตาลในเลือดFastingbloodsugardetail><BUNserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></BUNserum><การทำงานของไตBUNDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></การทำงานของไตBUNDetail><Creatinineserumprofile><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Creatinineserumprofile><CreatinineSerum><Result>0.62</Result><ReferenceLow>.5</ReferenceLow><ReferenceHigh>.8</ReferenceHigh><Grading></Grading></CreatinineSerum><CreatinineDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CreatinineDetail><Uricacidserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Uricacidserum><Sugarserum><Result>109</Result><ReferenceLow>74</ReferenceLow><ReferenceHigh>106</ReferenceHigh><Grading></Grading></Sugarserum><ระดับกรดยูริคในเลือดUricAcidDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระดับกรดยูริคในเลือดUricAcidDetail><Cholesterol><Result>160</Result><ReferenceLow>150</ReferenceLow><ReferenceHigh>200</ReferenceHigh><Grading></Grading></Cholesterol><ระดับไขมันCholesteeroldetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระดับไขมันCholesteeroldetail><Triglyceride><Result>124</Result><ReferenceLow>30</ReferenceLow><ReferenceHigh>150</ReferenceHigh><Grading></Grading></Triglyceride><ระดับไตรกลีเซอไรด์TriglycericeDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระดับไตรกลีเซอไรด์TriglycericeDetail><HDL-C><Result>58</Result><ReferenceLow>40</ReferenceLow><ReferenceHigh>60</ReferenceHigh><Grading></Grading></HDL-C><ระดับไขมันความหนาแน่นสูงHDLDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระดับไขมันความหนาแน่นสูงHDLDetail><LDL-C><Result>86</Result><ReferenceLow>100</ReferenceLow><ReferenceHigh>130</ReferenceHigh><Grading></Grading></LDL-C><ระดับไขมันความหนาแน่นต่ำLDLDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ระดับไขมันความหนาแน่นต่ำLDLDetail><SGOT><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></SGOT><การทำงานของตับSGOTDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></การทำงานของตับSGOTDetail><SGPT><Result>17</Result><ReferenceLow>10</ReferenceLow><ReferenceHigh>49</ReferenceHigh><Grading></Grading></SGPT><การทำงานของตับSGPTDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></การทำงานของตับSGPTDetail><Alkalinephosphatase><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Alkalinephosphatase><การทำงานของตับAlkalinePhospataseDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></การทำงานของตับAlkalinePhospataseDetail><Calciumserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Calciumserum><ผลการทำงานของไตCreatinineDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ผลการทำงานของไตCreatinineDetail><Phosphorusserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Phosphorusserum><Totalproteinserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Totalproteinserum><Albuminserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Albuminserum><Globulin><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Globulin><Totalbilirubin><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Totalbilirubin><Directbilirubin><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Directbilirubin><HbA-1CGlycosylatedHbProfile><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HbA-1CGlycosylatedHbProfile><HbA-1CGlycosylatedHb><Result>6.5</Result><ReferenceLow>4</ReferenceLow><ReferenceHigh>6</ReferenceHigh><Grading></Grading></HbA-1CGlycosylatedHb><HbA1CDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HbA1CDetail><PTProthrombintime><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></PTProthrombintime><Prothrombinผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Prothrombinผลตรวจ><Potassiumserum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Potassiumserum><Potassiumผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Potassiumผลตรวจ><Hbtyping><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></Hbtyping><HbTypingผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HbTypingผลตรวจ><LFTLiverfunctiontest><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></LFTLiverfunctiontest><ThalassemiaProfileStep2EDTA3tube><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ThalassemiaProfileStep2EDTA3tube></BLOODCHEMISTRY><SEROLOGY><CEA><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CEA><AFP><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AFP><PSAProstaticSpecificAg><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></PSAProstaticSpecificAg><TSH><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></TSH><TSHDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></TSHDetail><T3><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></T3><T4><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></T4><FT4><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></FT4><FreeT4Detail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></FreeT4Detail><FreeT3><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></FreeT3><HBeAg><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HBeAg><HBsAg><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HBsAg><HBsAgDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HBsAgDetail><HBsAb><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HBsAb><HBsAbDetail><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HBsAbDetail><HbcAb.><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HbcAb.><HbcAblgM><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HbcAblgM><VDRLSerum><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></VDRLSerum><AntiHCV><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AntiHCV><AntiHCVผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AntiHCVผลตรวจ><hepatitisAviruslgG><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></hepatitisAviruslgG><hepatitisAviruslgM><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></hepatitisAviruslgM><AntiHIV><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AntiHIV><VitaminD25Hydroxy><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></VitaminD25Hydroxy><VitaminD25Hydroxyผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></VitaminD25Hydroxyผลตรวจ></SEROLOGY><HBVPrevaccination><HBsAgPrevac><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></HBsAgPrevac><AntiHBsPrevac><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AntiHBsPrevac><AntiHBcPrevac><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></AntiHBcPrevac><RubellaIgG><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></RubellaIgG><RubellaIgM><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></RubellaIgM><ESR><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></ESR><CA19-9><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CA19-9><CA19-9ผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CA19-9ผลตรวจ><CA-125><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CA-125><Creatininerandomurine><Result>80.3</Result><ReferenceLow>45</ReferenceLow><ReferenceHigh>106</ReferenceHigh><Grading>80.3</Grading></Creatininerandomurine><CA1-25ผลตรวจ><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></CA1-25ผลตรวจ><URINALYSIS><Result></Result><ReferenceLow></ReferenceLow><ReferenceHigh></ReferenceHigh><Grading></Grading></URINALYSIS></HBVPrevaccination></CheckupData>";
        // System.out.println(new PostWeb().format(unformattedXml));
        txaPostData.setText(new PostWeb().format(unformattedXml));    
    */

    public String format(String xml) {

        try {
            final InputSource src = new InputSource(new StringReader(xml));
            final Node document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src).getDocumentElement();
            final Boolean keepDeclaration = Boolean.valueOf(xml.startsWith("<?xml"));

        //May need this: System.setProperty(DOMImplementationRegistry.PROPERTY,"com.sun.org.apache.xerces.internal.dom.DOMImplementationSourceImpl");


            final DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();
            final DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation("LS");
            final LSSerializer writer = impl.createLSSerializer();

            writer.getDomConfig().setParameter("format-pretty-print", Boolean.TRUE); // Set this to true if the output needs to be beautified.
            writer.getDomConfig().setParameter("xml-declaration", keepDeclaration); // Set this to true if the declaration is needed to be outputted.

            return writer.writeToString(document);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }    
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(ParsersXML.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(ParsersXML.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(ParsersXML.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(ParsersXML.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new ParsersXML().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextArea txaParserXML;
    private javax.swing.JTextArea txaXMLData;
    private javax.swing.JTextField txtFile;
    private javax.swing.JTextField txtJsonArray;
    // End of variables declaration//GEN-END:variables
}
